<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Simple Chat</title>
    <style>
        body {
            font-family: -apple-system, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        #chat {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: 80vh;
            display: flex;
            flex-direction: column;
        }
        #messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 8px;
        }
        .user {
            background: #007AFF;
            color: white;
            margin-left: 20%;
        }
        .assistant {
            background: #e9e9eb;
            margin-right: 20%;
        }
        #input-area {
            padding: 20px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
        }
        #input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 16px;
        }
        button {
            padding: 10px 20px;
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="chat">
        <div id="messages"></div>
        <div id="input-area">
            <input id="input" placeholder="Type a message..." autofocus>
            <button onclick="send()">Send</button>
        </div>
    </div>
    
    <script>
    async function send() {
        const input = document.getElementById('input');
        const text = input.value.trim();
        if (!text) return;
        
        // Add user message
        addMessage(text, 'user');
        input.value = '';
        
        // Save to Supabase
        await fetch('https://xvxyzmldrqewigrrccea.supabase.co/rest/v1/texts', {
            method: 'POST',
            headers: {
                'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2eHl6bWxkcnFld2lncnJjY2VhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3ODY0NDUsImV4cCI6MjA2ODM2MjQ0NX0.Y6F9a-L6VUdxPdUTNZTBNvAqTWwR6i2R-ACsoZZPxyE',
                'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2eHl6bWxkcnFld2lncnJjY2VhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3ODY0NDUsImV4cCI6MjA2ODM2MjQ0NX0.Y6F9a-L6VUdxPdUTNZTBNvAqTWwR6i2R-ACsoZZPxyE',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ content: `Chat: ${text}` })
        });
        
        // Add varied responses
        setTimeout(() => {
            const responses = [
                "Got it! Your message is saved.",
                "Message received and stored.",
                "I see that! It's in the database now.",
                "Saved to Supabase successfully.",
                "Your thought has been captured.",
                "Recorded in your brain database.",
                "Message logged at " + new Date().toLocaleTimeString()
            ];
            const response = responses[Math.floor(Math.random() * responses.length)];
            addMessage(response, 'assistant');
        }, 500);
    }
    
    function addMessage(text, type) {
        const messages = document.getElementById('messages');
        const div = document.createElement('div');
        div.className = `message ${type}`;
        div.textContent = text;
        messages.appendChild(div);
        messages.scrollTop = messages.scrollHeight;
    }
    
    document.getElementById('input').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') send();
    });
    
    // Welcome message
    addMessage("Hi! Type a message and I'll save it to your Supabase database.", 'assistant');
    </script>
</body>
</html>